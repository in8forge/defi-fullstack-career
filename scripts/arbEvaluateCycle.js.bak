import hre from "hardhat";
import dotenv from "dotenv";
dotenv.config();

const { ethers } = hre;

async function main() {
  console.log("Arbitrage evaluation cycle...");

  const provider = ethers.provider;

  const USDC = "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48";
  const WETH = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2";
  const UNISWAP_V2_ROUTER = "0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D";

  const router = await ethers.getContractAt(
    "IUniswapV2Router02",
    UNISWAP_V2_ROUTER
  );

  const amountIn = ethers.parseUnits("1000", 6);
  const amountsOut = await router.getAmountsOut(amountIn, [USDC, WETH]);

  console.log("Input USDC:", 1000);
  console.log("Output WETH:", ethers.formatUnits(amountsOut[1], 18));

  const block = await provider.getBlockNumber();
  console.log("Block:", block);
}

main().catch((err) => {
  console.error(err);
  process.exitCode = 1;
});
